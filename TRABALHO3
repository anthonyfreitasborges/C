#include <stdio.h>
#include <stdlib.h>
typedef struct{
    int id[30];
    char nome[10];
    int idade;
    int cpf;
    int plano;
}cadastro;

typedef struct{
    int id[30];
    char nome[20];
    int crm;
    char especialidade[30];
    char disponibilidade[10];
}medico;

typedef struct{
    int idConsulta[10];
    int idPaciente[10];
    int idMedico[10];
    int data;
}campo;

int cadastarPacientes(cadastro *passiente,int n1){
	int t,y;

    for(int i=0;i<n1;i++){
        printf("digite os paciente %d\n",i);
        printf("digite o nome\n");
        getchar();
		fgets(passiente[i].nome,20,stdin);
     	printf("digite a idade \n");
     	scanf("%d",&passiente[i].idade);
     		do{
  	  			if(passiente[i].idade<0){
       		 	printf("idade invalida \n digite novamente\n");
        		scanf("%d",&passiente[i].idade);
        		if(passiente[i].idade<0){
            	t=1;
        		}else{
        			t=0;}
		     	}
            }
	  while(t !=0);
     printf("digite o cpf \n");
    	scanf("%d",&passiente[i].cpf);
   		 for(int y=0;y<i;y++){
        	if(passiente[y].cpf == passiente[i].cpf){
        		printf("cpf ja foi usado digite um outro\n");
        		int temp=passiente[i].cpf;
        		scanf("%d",&passiente[i].cpf);
        		if(passiente[i].cpf==temp){
            	y--;}
        	}
    }
       printf("tem plano (0-nao, 1-sim) \n");
    	scanf("%d",&passiente[i].plano);

    }


    return n1;
}

int cadastrarMedicos(medico *doutor,int n2){
	int temp=0;
	for(int i=0;i<n2;i++){
		printf("digite o nome do medico\n");
		getchar();
		fgets(doutor[i].nome,20,stdin);
	    printf("digite o CRM do medico \n");
        scanf("%d",&doutor[i].crm);
        if(i>0){
        	 for(int y=0;y<i;y++){
        	 if(doutor[y].crm == doutor[i].crm){
        		printf("CRM ja foi usado digite um outro\n");
        		int temp=doutor[i].crm;
        		scanf("%d",&doutor[i].crm);
        		if(doutor[i].crm==temp){
            	y--; }
        	}
		 }
		}
        printf("digite a especialidade do medico\n");
		getchar();
		fgets(doutor[i].especialidade,30,stdin);
		printf("digite a disponibilidade do medico\n");
		getchar();
		fgets(doutor[i].disponibilidade,10,stdin);
	}
}



void mostrarDados(cadastro *passiente,medico *doutor, int n1,int n2) {
    printf("\n--- Lista de Pacientes ---\n");
    for (int i = 0; i < n1; i++) {
        printf("ID: %d\n", passiente[i].id);
        printf("Nome: %s\n", passiente[i].nome);
        printf("Idade: %d\n", passiente[i].idade);
        printf("CPF: %d\n", passiente[i].cpf);
        printf("Plano: %s\n", passiente[i].plano ? "Sim" : "NÃ£o");
        printf("----------------------------\n");
    }
    printf("\n--- Lista de medicos ---\n");
    for (int in = 0; in < n2; in++) {
        printf("ID: %d\n",doutor[in].id);
        printf("Nome: %s\n", doutor[in].nome);
        printf("CRM: %d\n", doutor[in].crm);
        printf("ESPECIALIDADE: %s\n", doutor[in].especialidade);
        printf("DISPONIBILIDADE: %s\n", doutor[in].disponibilidade);
        printf("----------------------------\n");
    }
}
int main(){
    int escolha,n1,n2,passienteCadastrado=0;
    cadastro *passiente;
     medico *doutor;
    printf("MENU\n");
    do{
            printf("1-CADASTRAR PACIENTE\n");
            printf("2-CADASTRAR MEDICO\n");
            printf("3-EXIBIR CADASTROS\n");
            printf("4-SAIR DO MENU\n");
        scanf("%d",&escolha);
    switch(escolha){
    case 1:
        printf("digite quantas pessesoas vao ser cadastrada\n");
    scanf("%d",&n1);
        passiente= (cadastro*)malloc(n1*sizeof(cadastro));
        cadastarPacientes(passiente, n1);
        break;
    case 2:
        printf("digite quantos medicos vao ser cadastrados\n");
        scanf("%d",&n2);
        doutor=(medico*)malloc(n2*sizeof(medico));
        cadastrarMedicos(doutor,n2);
        break;
    case 3:
         mostrarDados(passiente,doutor,n1,n2);
         break;
    }
    }while(escolha!=4);

    free(passiente);
    free(doutor);

return 0;
}
